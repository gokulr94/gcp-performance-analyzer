<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GCP Performance Calculator for Support Engineers</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>GCP Performance Bottleneck Calculator</h1>
            <p class="subtitle">Calculate actual performance limits based on machine type, disk type, and disk size</p>
            <p class="use-case">For GCP Support Engineers troubleshooting customer performance issues</p>
        </header>

        <main>
            <div class="calculator-section">
                <h2>Configuration Input</h2>
                <div class="input-grid">
                    <div class="input-group">
                        <label for="machineSelect">Machine Type</label>
                        <select id="machineSelect" class="dropdown">
                            <option value="">Loading machines...</option>
                        </select>
                        <p class="input-hint">Select customer's VM machine type</p>
                    </div>

                    <div class="input-group">
                        <label for="diskTypeSelect">Disk Type</label>
                        <select id="diskTypeSelect" class="dropdown">
                            <option value="">Loading disk types...</option>
                        </select>
                        <p class="input-hint">Select persistent disk type attached to the VM</p>
                    </div>

                    <div class="input-group">
                        <label for="diskSizeInput">Disk Size (GB)</label>
                        <input type="number" id="diskSizeInput" class="number-input" min="1" max="65000" placeholder="e.g., 500">
                        <p class="input-hint">Enter disk size in gigabytes</p>
                    </div>
                </div>

                <button id="calculateBtn" class="calculate-btn" disabled>Calculate Performance</button>
            </div>

            <div id="resultsSection" class="results-section" style="display: none;">
                <div class="results-header">
                    <h2>Performance Analysis</h2>
                    <div class="config-summary" id="configSummary"></div>
                </div>

                <!-- Bottleneck Alert -->
                <div id="bottleneckAlert" class="bottleneck-alert">
                    <div class="alert-icon">⚠️</div>
                    <div class="alert-content">
                        <h3>Bottleneck Identified</h3>
                        <p id="bottleneckText"></p>
                    </div>
                </div>

                <!-- Performance Comparison Table -->
                <div class="comparison-section">
                    <h3>Performance Limits Comparison</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th>Machine Type Limit</th>
                                <th>Disk Performance</th>
                                <th>Effective Performance</th>
                                <th>Bottleneck</th>
                            </tr>
                        </thead>
                        <tbody id="comparisonTableBody">
                        </tbody>
                    </table>
                </div>

                <!-- Machine Specs -->
                <div class="specs-section">
                    <h3>Machine Type Specifications</h3>
                    <div class="spec-grid">
                        <div class="spec-item">
                            <span class="spec-label">Family:</span>
                            <span class="spec-value" id="machineFamily">-</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">vCPUs:</span>
                            <span class="spec-value" id="machineVcpu">-</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">Memory:</span>
                            <span class="spec-value" id="machineMemory">-</span>
                        </div>
                        <div class="spec-item">
                            <span class="spec-label">Network Bandwidth:</span>
                            <span class="spec-value" id="machineNetwork">-</span>
                        </div>
                    </div>
                </div>

                <!-- AI Analysis -->
                <div class="ai-section">
                    <button id="analyzeBtn" class="ai-btn">Get AI Recommendations</button>
                    <div id="aiAnalysis" class="ai-analysis" style="display: none;">
                        <h3>AI-Powered Analysis & Recommendations</h3>
                        <div id="analysisText" class="analysis-content"></div>
                    </div>
                </div>
            </div>

            <div id="loadingIndicator" class="loading" style="display: none;">
                <div class="spinner"></div>
                <p>Calculating...</p>
            </div>

            <div id="errorMessage" class="error-message" style="display: none;">
                <div class="error-icon">❌</div>
                <p id="errorText"></p>
            </div>
        </main>

        <footer>
            <p>Performance Calculator for GCP Support Engineers | Data based on official GCP documentation</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
